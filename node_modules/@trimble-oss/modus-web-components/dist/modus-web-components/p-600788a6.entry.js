import{r as i,h as o}from"./p-c64eb6ff.js";import{h as n,f as e,j as t,q as s,p as l,g as d}from"./p-1edb5fd6.js";const a=class{constructor(o){i(this,o),this.refItemContent=[],this.getAllLeafColumns=void 0,this.columnsVisibility=void 0,this.showDropdown=void 0,this.menuIconContainerRef=void 0,this.toggleDropdown=void 0,this.maxHeight=void 0,this.columnsVisibilityState=new Map}componentWillLoad(){this.initializeVisibilityState()}applyColumnsVisibility(){this.getAllLeafColumns().forEach((i=>{this.columnsVisibilityState.has(i.id)&&i.toggleVisibility(this.columnsVisibilityState.get(i.id))})),this.toggleDropdown(!this.showDropdown),this.menuIconContainerRef.focus()}closeDropdown(){this.columnsVisibilityState=new Map,this.toggleDropdown(!this.showDropdown),this.menuIconContainerRef.focus()}handleApplyKeyDown(i){i.key.toLowerCase()!==n||i.shiftKey||this.toggleDropdown(!1)}handleColumnItemKeyDown(i,o){let n;const d=(i,o)=>{this.refItemContent[i]?this.refItemContent[i].focus():d(o?i+1:i-1,o)},a=i.key.toLowerCase();a===e||a===t?this.toggleColumnVisibility(o):a===s?(n=o+1<this.refItemContent.length?o+1:this.refItemContent.length-1,d(n,!0),i.preventDefault()):a===l&&(n=o-1>=0?o-1:0,d(n,!1),i.preventDefault())}handleRefColumnItemContent(i,o,n){n||(this.refItemContent[o]=i)}initializeVisibilityState(){this.getAllLeafColumns().forEach((i=>{var o,n,e,t;const s=null===(n=null===(o=this.columnsVisibility)||void 0===o?void 0:o.requiredColumns)||void 0===n?void 0:n.includes(i.id),l=null===(t=null===(e=this.columnsVisibility)||void 0===e?void 0:e.hiddenColumns)||void 0===t?void 0:t.includes(i.id);!s&&l&&i.toggleVisibility(!1)}))}toggleColumnVisibility(i){const o=this.refItemContent[i].children[0].shadowRoot.children;o[o.length-1].click()}checkIfRequiredColumn(i){var o,n;return null===(n=null===(o=this.columnsVisibility)||void 0===o?void 0:o.requiredColumns)||void 0===n?void 0:n.includes(i)}renderColumnsChecklist(){const i=(i,o)=>({key:i,tabIndex:this.checkIfRequiredColumn(i)?-1:0,ref:n=>{this.handleRefColumnItemContent(n,o,this.checkIfRequiredColumn(i))},onClick:()=>this.toggleColumnVisibility(o),onKeyDown:i=>this.handleColumnItemKeyDown(i,o)});return this.getAllLeafColumns().map(((n,e)=>{var t,s;return o("div",Object.assign({},i(n.id,e),{class:"column-visibility-item"}),o("modus-checkbox",{ariaLabel:n.columnDef.header,label:n.columnDef.header,checked:n.getIsVisible(),onCheckboxClick:i=>this.columnsVisibilityState.set(n.id,i.detail),disabled:null===(s=null===(t=this.columnsVisibility)||void 0===t?void 0:t.requiredColumns)||void 0===s?void 0:s.includes(n.id),stopPropagation:!0}))}))}renderCancelApplyButtons(){return o("div",{class:"column-visibility-buttons-container"},o("modus-button",{size:"small",buttonStyle:"outline",onClick:()=>this.closeDropdown()},"Cancel"),o("modus-button",{size:"small",onClick:()=>this.applyColumnsVisibility(),onKeyDown:i=>this.handleApplyKeyDown(i)},"Apply"))}render(){return o("div",{key:"d118f259333ea23891700be08eb68637fe658301",class:"columns-visibility-menu",style:{maxHeight:this.maxHeight||"60dvh"}},o("div",{key:"2d8def25cf5086b8f65c8cf38cb6da0934e5eb0c",class:"column-visibility-header"},this.columnsVisibility.title||"Columns"),o("div",{key:"f6f9b8abebaf892a53a533741ea67e01b9f8de37",class:"column-visibility-content"},this.renderColumnsChecklist()),this.renderCancelApplyButtons())}};a.style=".columns-visibility-menu{display:flex;flex-direction:column}.columns-visibility-menu .column-visibility-header{color:var(--modus-primary, #019aeb);font-size:0.875rem;font-weight:700;line-height:18px;margin:12px;margin-bottom:5px}.columns-visibility-menu .column-visibility-content{overflow:auto}.columns-visibility-menu .column-visibility-item{padding:5px 5px 5px 12px}.columns-visibility-menu .column-visibility-item:focus,.columns-visibility-menu .column-visibility-item:hover{background:var(--modus-group-item-hover-bg, #e0e1e9);outline:none}.columns-visibility-menu .column-visibility-item:last-child{margin-bottom:10px}.columns-visibility-menu .column-visibility-buttons-container{display:flex;justify-content:flex-end;margin-bottom:12px;margin-right:12px}modus-button{padding:12px 0 0 12px}";const r=i=>{var n,e,t;return o("svg",{class:"icon-horizontal-ellipsis "+(i.pressed?"pressed":""),fill:null!==(n=i.color)&&void 0!==n?n:"currentColor",height:null!==(e=i.size)&&void 0!==e?e:16,onClick:i.onClick?()=>i.onClick():null,viewBox:"0 0 24 24",width:null!==(t=i.size)&&void 0!==t?t:16},o("path",{d:"M10.59 10.59c-.78.78-.78 2.05 0 2.83s2.05.78 2.83 0 .78-2.05 0-2.83-2.05-.78-2.83 0Zm7 0c-.78.78-.78 2.05 0 2.83s2.05.78 2.83 0 .78-2.05 0-2.83-2.05-.78-2.83 0Zm-14 0c-.78.78-.78 2.05 0 2.83s2.05.78 2.83 0 .78-2.05 0-2.83-2.05-.78-2.83 0Z"}))},c=class{constructor(o){i(this,o),this.context=void 0,this.show=!1}handleClickOutside(i){i.composedPath().find((i=>"dropdown-menu-container"===i.className))||(this.show=!1)}handleIconKeyDown(i){const o=i.key.toLowerCase();o===e||o===t?(this.show=!0,i.preventDefault()):o===d&&(this.show=!1,i.preventDefault())}handleDropdownKeyDown(i){i.key.toLowerCase()===d&&(this.show=!1,this.menuIconContainerRef.focus(),i.preventDefault())}render(){const{tableInstance:{getAllLeafColumns:i},toolbarOptions:n,maxHeight:e}=this.context;return o("div",{key:"e028260e39853e6d9bb12954c06d0ca36b858fbe",class:"dropdown-menu-container"},o("div",{key:"f4ca8b772cd9207c5e4349e9b90a6ca270f685bf",tabIndex:0,class:"dropdown-menu-icon",onClick:()=>this.show=!this.show,onKeyDown:i=>this.handleIconKeyDown(i),ref:i=>this.menuIconContainerRef=i},o(r,{key:"ee5496caaa3a62710c2f4ce76a0006017c36d136",size:"20"})),(null==n?void 0:n.columnsVisibility)&&o("div",{onKeyDown:i=>this.handleDropdownKeyDown(i),class:"dropdown-menu "+(this.show?"visible":"")},o("modus-table-columns-visibility",{getAllLeafColumns:i,columnsVisibility:null==n?void 0:n.columnsVisibility,showDropdown:this.show,menuIconContainerRef:this.menuIconContainerRef,toggleDropdown:i=>this.show=i,maxHeight:e})))}};c.style='.dropdown-menu-container{display:inline-block;padding-left:12px;position:relative}.dropdown-menu-container .dropdown-menu-icon{border-radius:3px;cursor:pointer;display:flex;padding:4px}.dropdown-menu-container .dropdown-menu-icon svg{fill:var(--modus-icon-colour, #252a2e)}.dropdown-menu-container .dropdown-menu-icon:hover{background:var(--modus-group-item-hover-bg, #e0e1e9)}.dropdown-menu-container .dropdown-menu{background-color:var(--modus-group-item-bg, #fff);border:1px solid var(--modus-group-item-border-color, #e0e1e9);box-shadow:0 0 4px var(--modus-card-shadow-color, rgba(54, 53, 69, 0.3019607843));display:none;font-family:"Open Sans", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji";position:absolute;right:0;top:28px;width:240px;z-index:99}.dropdown-menu-container .dropdown-menu.visible{display:block}';export{a as modus_table_columns_visibility,c as modus_table_dropdown_menu}