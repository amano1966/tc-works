import{h as t,r as o,c as e,F as i,g as s}from"./p-c64eb6ff.js";import{I as n}from"./p-d660fcb2.js";import{a as d,I as a}from"./p-915cd2ac.js";const r=["input","select","textarea","a[href]","button","[tabindex]","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])'].join(","),l=function(t,o){for(let e=0;e<t.length;e++)if(t[e].checked&&t[e].form===o)return t[e]},h=function(t){const o=[],e=[];return t.getAttributeNode?(Array.from(t.querySelectorAll(r)).forEach(((t,i)=>{const s=function(t){const o=parseInt(t.getAttribute("tabindex"),10);return Number.isNaN(o)?/^(AUDIO|VIDEO|DETAILS)$/.test(t.tagName)?0:t.tabIndex:o}(t);-1!==s&&function(t){return!(t.disabled||"true"===t.ariaHidden||"INPUT"===t.tagName&&"hidden"===t.type||function(t){if("INPUT"!==t.tagName||"radio"!==t.type)return!1;if(!t.name)return!1;const o=t.ownerDocument.querySelectorAll('input[type="radio"][name="'+t.name+'"]'),e=l(o,t.form);return!(!e||e===t)}(t))}(t)&&(0===s?o.push(t):e.push({documentOrder:i,tabIndex:s,node:t}))})),e.sort(((t,o)=>t.tabIndex===o.tabIndex?t.documentOrder-o.documentOrder:t.tabIndex-o.tabIndex)).map((t=>t.node)).concat(o)):[]},c=({id:o,ref:e,onFocus:i})=>t("div",{id:o,ref:e,tabindex:"0","aria-hidden":"true",onFocus:t=>i&&i(t)});class u{constructor(t,o){this.tababbleNodes=[],t&&(this.tababbleNodes=h(t)),this.startWrap=o}onStartWrapFocus(){var t;(null===(t=this.tababbleNodes)||void 0===t?void 0:t.length)&&this.tababbleNodes[0].focus()}onEndWrapFocus(){this.startWrap.focus()}}const m=class{constructor(t){o(this,t),this.closed=e(this,"closed",7),this.opened=e(this,"opened",7),this.primaryButtonClick=e(this,"primaryButtonClick",7),this.secondaryButtonClick=e(this,"secondaryButtonClick",7),this.ignoreOverlayClick=!1,this.ariaLabel=void 0,this.headerText=void 0,this.primaryButtonAriaLabel=void 0,this.primaryButtonDisabled=void 0,this.primaryButtonText=void 0,this.secondaryButtonAriaLabel=void 0,this.secondaryButtonDisabled=void 0,this.secondaryButtonText=void 0,this.zIndex="1",this.backdrop="default",this.showFullscreenToggle=!1,this.fullscreen=!1,this.isContentScrollable=!1,this.visible=void 0}async close(){if(this.visible)return this.visible=!1,this.closed.emit(),Promise.resolve()}async open(){if(!this.visible)return this.visible=!0,this.opened.emit(),Promise.resolve()}toggleFullscreen(){this.fullscreen=!this.fullscreen}handleModalContentMouseDown(){this.ignoreOverlayClick=!0}documentKeyHandler(t){"ESCAPE"===t.code.toUpperCase()&&this.close()}handleOverlayClick(t){switch(this.backdrop){case"static":return;case"default":if(this.ignoreOverlayClick||!t.target.classList.contains("overlay"))return void(this.ignoreOverlayClick=!1);this.close()}}handleEnterKeydown(t,o){"Enter"===t.code&&o()}handlePrimaryClick(){this.primaryButtonDisabled||this.primaryButtonClick.emit()}handleSecondaryClick(){this.secondaryButtonDisabled||this.secondaryButtonClick.emit()}componentDidRender(){this.modalContentRef&&this.startTrapRef&&(this.focusWrapping=new u(this.modalContentRef,this.startTrapRef)),this.modalBodyRef&&(this.resizeObserver=new ResizeObserver((()=>{this.checkContentScrollable()})),this.resizeObserver.observe(this.modalBodyRef)),this.checkContentScrollable()}disconnectedCallback(){this.resizeObserver&&this.resizeObserver.disconnect()}checkContentScrollable(){this.modalContentRef&&(this.isContentScrollable=this.modalBodyRef.scrollHeight>this.modalBodyRef.clientHeight)}renderModal(){return t("div",{class:"content",ref:t=>this.modalContentRef=t,onMouseDown:()=>this.handleModalContentMouseDown()},t(c,{id:"startTrap",ref:t=>this.startTrapRef=t,onFocus:()=>{var t;return null===(t=this.focusWrapping)||void 0===t?void 0:t.onStartWrapFocus()}}),this.renderModalHeader(),t("div",{class:"body",ref:t=>this.modalBodyRef=t},t("slot",null)),this.renderModalFooter(),t(c,{id:"endTrap",onFocus:()=>{var t;return null===(t=this.focusWrapping)||void 0===t?void 0:t.onEndWrapFocus()}}))}renderModalHeader(){return t("header",{class:{scrollable:this.isContentScrollable}},this.headerText,t("div",{class:"header-buttons"},this.showFullscreenToggle&&t("div",{role:"button",tabindex:0,"aria-label":this.fullscreen?"Collapse":"Expand",onClick:()=>this.toggleFullscreen(),onKeyDown:t=>this.handleEnterKeydown(t,(()=>this.toggleFullscreen()))},t(this.fullscreen?d:a,{size:"24"})),t("div",{role:"button",tabindex:0,"aria-label":"Close",onClick:()=>this.close(),onKeyDown:t=>this.handleEnterKeydown(t,(()=>this.close()))},t(n,{size:"24"}))))}renderModalFooter(){return t(i,null,t("footer",{class:{"has-buttons":Boolean(this.primaryButtonText||this.secondaryButtonText),scrollable:this.isContentScrollable}},this.secondaryButtonText&&t("modus-button",{disabled:this.secondaryButtonDisabled,"button-style":"outline",color:"secondary",ariaLabel:this.secondaryButtonAriaLabel,onButtonClick:()=>this.handleSecondaryClick()},this.secondaryButtonText),this.primaryButtonText&&t("modus-button",{disabled:this.primaryButtonDisabled,color:"primary",ariaLabel:this.primaryButtonAriaLabel,onButtonClick:()=>this.handlePrimaryClick()},this.primaryButtonText),t("slot",{name:"footerContent"})))}render(){return t("div",{key:"763cdb0f034096b6ba74cf9041db50350fc50d21","aria-hidden":this.visible?void 0:"true","aria-label":this.visible&&this.ariaLabel||void 0,"aria-modal":this.visible?"true":void 0,class:`modus-modal ${this.fullscreen?"fullscreen":""} overlay ${this.visible?"visible":"hidden"}`,onClick:t=>this.handleOverlayClick(t),role:this.visible?"dialog":void 0,style:{zIndex:this.zIndex}},this.renderModal())}get el(){return s(this)}};m.style=".modus-modal{align-items:center;background-color:var(--modus-modal-backdrop-bg, rgba(37, 42, 46, 0.7490196078));font-size:0.875rem;height:100%;justify-content:center;left:0;overflow:auto;position:fixed;top:0;width:100%}.modus-modal.visible{display:inline-flex}.modus-modal.hidden{display:none}.modus-modal .content{background-color:var(--modus-modal-bg, #fff);border:1px solid var(--modus-modal-border-color, rgba(0, 0, 0, 0.2));border-radius:0.25rem;box-shadow:0 0 8px rgba(37, 42, 46, 0.3);color:var(--modus-modal-color, #252a2e);display:flex;fill:var(--modus-modal-color, #252a2e);flex-direction:column;justify-content:center;max-width:650px;min-width:300px;outline:0}.modus-modal .content header{align-items:center;display:flex;font-size:1rem;font-weight:700;height:64px;justify-content:space-between;padding:0 1rem}.modus-modal .content header.scrollable{border-bottom:1px solid var(--modus-modal-divider-color, #e0e1e9)}.modus-modal .content header .icon-close,.modus-modal .content header .icon-expand,.modus-modal .content header .icon-collapse{cursor:pointer}.modus-modal .content header .icon-close path,.modus-modal .content header .icon-expand path,.modus-modal .content header .icon-collapse path{fill:var(--modus-modal-close-color, #252a2e)}.modus-modal .content header .icon-close:hover path,.modus-modal .content header .icon-expand:hover path,.modus-modal .content header .icon-collapse:hover path{opacity:var(--modus-modal-close-hover-opacity, 0.75)}.modus-modal .content .header-buttons{align-items:center;display:flex;gap:0.5rem;justify-content:center;margin-left:auto}.modus-modal .content .header-buttons div{font-size:0}.modus-modal .content .body{height:auto;max-height:calc(100dvh - 188px);overflow-y:auto;padding:1rem}.modus-modal .content footer{padding:1.25rem 1rem}.modus-modal .content footer.scrollable{border-top:1px solid var(--modus-modal-divider-color, #e0e1e9)}.modus-modal .content footer.has-buttons{align-items:center;display:flex;gap:0.5rem;justify-content:flex-end}.modus-modal.fullscreen{overflow:hidden}.modus-modal.fullscreen .content{height:calc(100% - 64px);max-width:none;width:calc(100% - 64px)}.modus-modal.fullscreen .content .body{flex-grow:1}";export{m as modus_modal}