import{h as t,r as e,c as o}from"./p-c64eb6ff.js";import{M as i}from"./p-58d81fd3.js";import"./p-5e48480e.js";import"./p-bb578bd5.js";import"./p-9ad0c79e.js";import"./p-915cd2ac.js";import"./p-7214be7f.js";class l{static convertToTColumns(t){return null==t?void 0:t.map((t=>{var e,o,i,l,n,r,s;return{align:null!==(e=t.align)&&void 0!==e?e:"left",display:null!==(o=t.display)&&void 0!==o?o:t,id:null!==(n=null!==(i=t.id)&&void 0!==i?i:null===(l=t.display)||void 0===l?void 0:l.toLocaleLowerCase())&&void 0!==n?n:t.toLocaleLowerCase(),readonly:null!==(r=t.readonly)&&void 0!==r&&r,width:null!==(s=t.width)&&void 0!==s?s:""}}))}static convertToTRows(t,e){return(null==t?void 0:t.length)&&!Array.isArray(t[0])?t:null==t?void 0:t.map((t=>{var o,i;const l={_id:null!==(o=t._id)&&void 0!==o?o:"",_selected:null!==(i=t._selected)&&void 0!==i&&i};return t.forEach(((t,o)=>{l[e[o].id]=t})),l}))}static sortData(t,e,o){return[...t].sort("asc"===o?(t,o)=>"badge"===t[e]._type?t[e].text>o[e].text?1:-1:"link"===t[e]._type?t[e].display>o[e].display?1:-1:t[e]>o[e]?1:-1:(t,o)=>"badge"===t[e]._type?t[e].text>o[e].text?-1:1:"link"===t[e]._type?t[e].display>o[e].display?-1:1:t[e]>o[e]?-1:1)}}const n=e=>{var o,i,l;return t("svg",{"data-test-id":"iconSortAZ",class:e.pressed?"pressed":"",fill:null!==(o=e.color)&&void 0!==o?o:"currentColor",height:null!==(i=e.size)&&void 0!==i?i:16,onClick:e.onClick,viewBox:"0 0 32 32",width:null!==(l=e.size)&&void 0!==l?l:16},t("path",{d:"M17.658 14.94a.997.997 0 0 0 1.281-.598L20.155 11h3.69l1.216 3.342a1 1 0 1 0 1.878-.684l-4-11a.999.999 0 0 0-1.878 0l-4 11a1 1 0 0 0 .597 1.282zM22 5.926 23.118 9h-2.236L22 5.926zM26 28h-5.919l6.7-8.375A1.002 1.002 0 0 0 26 18h-8a1 1 0 1 0 0 2h5.919l-6.7 8.375A1.002 1.002 0 0 0 18 30h8a1 1 0 1 0 0-2zm-14.766-5H9V3a1 1 0 1 0-2 0v20H4.766a.86.86 0 0 0-.782.492c-.146.304-.107.655.074.876l3.264 5.085c.165.207.413.326.678.326s.513-.119.709-.369l3.203-4.999a.862.862 0 0 0 .104-.919.86.86 0 0 0-.782-.492z"}))},r=e=>{var o,i,l;return t("svg",{"data-test-id":"iconSortZA",class:e.pressed?"pressed":"",width:null!==(o=e.size)&&void 0!==o?o:16,height:null!==(i=e.size)&&void 0!==i?i:16,fill:null!==(l=e.color)&&void 0!==l?l:"currentColor",onClick:e.onClick,viewBox:"0 0 32 32"},t("path",{d:"M17.658 14.94a.997.997 0 0 0 1.281-.598L20.155 11h3.69l1.216 3.342a1 1 0 1 0 1.878-.684l-4-11a.999.999 0 0 0-1.878 0l-4 11a1 1 0 0 0 .597 1.282zM22 5.926 23.118 9h-2.236L22 5.926zM26 28h-5.919l6.7-8.375A1.002 1.002 0 0 0 26 18h-8a1 1 0 1 0 0 2h5.919l-6.7 8.375A1.002 1.002 0 0 0 18 30h8a1 1 0 1 0 0-2zM8.678 2.547c-.33-.414-.995-.457-1.387.043L4.088 7.589a.862.862 0 0 0-.104.919.86.86 0 0 0 .782.492H7v20a1 1 0 1 0 2 0V9h2.234a.86.86 0 0 0 .782-.492c.146-.304.106-.655-.074-.876L8.678 2.547z"}))},s=e=>{const o="none"!==e.sortState.direction?t("modus-tooltip",{position:"bottom",text:"asc"===e.sortState.direction?"Sort descending":"Remove sort"},t("div",{class:"icon-container"},t("div",{class:"sort-icon"},t("asc"===e.sortState.direction?n:r,{size:"16"})))):null,i=t("div",{style:{width:"16px"}});return t("th",{class:e.sortOptions.canSort?"can-sort":"",onClick:()=>e.onColumnHeaderClick(e.column.id)},t("div",{class:`column-header align-${e.column.align}`},"right"===e.column.align&&e.sortState.columnId!==e.column.id&&i,"right"===e.column.align&&e.sortState.columnId===e.column.id&&"none"===e.sortState.direction&&i,"right"===e.column.align&&e.sortState.columnId===e.column.id&&o,t("div",null,null==(l=e.column.display)?void 0:l.replace(/\w\S*/g,(t=>t.charAt(0).toUpperCase()+t.substring(1).toLowerCase())).replace(/\s+/g," ")),"left"===e.column.align&&e.sortState.columnId===e.column.id&&o,"center"===e.column.align&&e.sortState.columnId===e.column.id&&t("div",{style:{position:"relative"}},t("div",{style:{display:"flex",justifyContent:"flex-end",position:"absolute"}},o))));var l},a=e=>t("div",{class:"cell-link",onClick:()=>e.onLinkClick(e.link)},e.link.display),d=e=>t("div",{class:"cell-badge"},t("modus-badge",{color:e.badge.color,type:e.badge.type},e.badge.text)),c=e=>t("modus-dropdown",{"toggle-element-id":`dropdownToggle-${e.rowId}`,"animate-list":e.animateDropdown,customPlacement:{left:-194},showDropdownListBorder:!1},t("div",{class:"row-action",id:`dropdownToggle-${e.rowId}`,slot:"dropdownToggle"},t(i,{icon:"more_vertical",size:"24"})),t("div",{slot:"dropdownList"},t("div",{class:"list-container"},t("div",{class:"items-container"},e.actions.map((o=>t("div",{class:"action-item",onClick:()=>e.onRowActionClick(o._id,e.rowId)},t("div",{class:"action-item-content"},o.display.icon&&t(i,{icon:o.display.icon,size:"16"}),t("div",{class:"display-text"},o.display.text))))))))),h=class{constructor(t){e(this,t),this.cellLinkClick=o(this,"cellLinkClick",7),this.rowDoubleClick=o(this,"rowDoubleClick",7),this.selection=o(this,"selection",7),this.sort=o(this,"sort",7),this.rowActionClick=o(this,"rowActionClick",7),this.classBySize=new Map([["small","size-small"],["large","size-large"]]),this.columns=void 0,this.data=void 0,this.displayOptions={animateRowActionsDropdown:!1,borderless:!0,cellBorderless:!0,rowStripe:!1,size:"large"},this.rowActions=[],this.selectionOptions={canSelect:!1,checkboxSelection:!1},this.sortOptions={canSort:!1,serverSide:!1},this.allSelected=!1,this.sortState={columnId:"",direction:"none"}}dataChanged(t,e){var o;this.originalData=null!==(o=this.originalData)&&void 0!==o?o:l.convertToTRows(e,this.columns)}componentWillLoad(){this.convertColumnsAndRows(),this.updateAllSelected()}componentDidLoad(){this.originalData=l.convertToTRows(this.data,this.columns)}componentWillUpdate(){this.convertColumnsAndRows()}convertColumnsAndRows(){this.columns=l.convertToTColumns(this.columns),this.data=l.convertToTRows(this.data,this.columns)}emitSelection(){this.selection.emit(this.data.filter((t=>t._selected)).map((t=>t._id)))}handleCheckboxClick(t){this.data=this.data.map((e=>Object.assign(Object.assign({},e),{_selected:e._id===t?!e._selected:e._selected}))),this.updateAllSelected(),this.emitSelection()}handleColumnHeaderClick(t){this.sortOptions.canSort&&(this.sortState=Object.assign(Object.assign({},this.sortState),t===this.sortState.columnId?{direction:"asc"===this.sortState.direction?"desc":"desc"===this.sortState.direction?"none":"asc"}:{direction:"asc",columnId:t}),this.sort.emit({columnId:this.sortState.columnId,direction:this.sortState.direction}),this.sortOptions.serverSide||(this.data="none"===this.sortState.direction?this.originalData.map((t=>Object.assign(Object.assign({},t),{_selected:this.data.find((e=>e._id===t._id))._selected}))):l.sortData(this.data,this.sortState.columnId,this.sortState.direction),this.updateAllSelected()))}handleHeaderCheckboxClick(t){this.data=this.data.map((e=>Object.assign(Object.assign({},e),{_selected:t}))),this.emitSelection()}handleRowClick(t){this.selectionOptions.canSelect&&!this.selectionOptions.checkboxSelection&&(this.data=this.data.map((e=>Object.assign(Object.assign({},e),{_selected:e._id===t?!e._selected:e._selected}))),this.emitSelection())}handleRowDoubleClick(t){this.rowDoubleClick.emit(t)}updateAllSelected(){var t;this.allSelected=null===(t=this.data)||void 0===t?void 0:t.every((t=>t._selected))}render(){var e,o,i;const l=`\n      ${this.displayOptions.borderless?"borderless":""}\n      ${this.displayOptions.cellBorderless?"cell-borderless":""}\n      ${this.displayOptions.rowStripe?"row-stripe":""}\n      ${this.classBySize.get(this.displayOptions.size)}\n    `;return t("table",{key:"d53f299f917ec5f6c4e0fb053c52d12a7d94ed02",class:l},t("colgroup",{key:"8435c07dd1c6754ebbca29ba1967c063cf6ffdfd"},this.selectionOptions.canSelect&&this.selectionOptions.checkboxSelection&&t("col",{style:{width:"34px"}}),null===(e=this.columns)||void 0===e?void 0:e.map((e=>t("col",{style:{width:e.width}}))),!!this.rowActions.length&&t("col",{style:{width:"34px"}})),t("thead",{key:"c098e976be8cca8ee699776744fa8804a3bc2803"},t("tr",{key:"5be24af7e8e9a1cee430a683f7c79e2b3cc552ea"},this.selectionOptions.canSelect&&this.selectionOptions.checkboxSelection&&t("th",null,t("div",{class:"column-header align-center"},t("modus-checkbox",{checked:this.allSelected,onCheckboxClick:t=>this.handleHeaderCheckboxClick(t.detail)}))),null===(o=this.columns)||void 0===o?void 0:o.map((e=>t(s,{column:e,onColumnHeaderClick:t=>this.handleColumnHeaderClick(t),sortOptions:this.sortOptions,sortState:this.sortState}))),!!this.rowActions.length&&t("th",null))),t("tbody",{key:"cd8d983d7d804f126285ffa915c7910ff00b11b2"},null===(i=this.data)||void 0===i?void 0:i.map((e=>{var o;return t("tr",{onClick:()=>this.handleRowClick(e._id),onDblClick:()=>this.handleRowDoubleClick(e._id)},this.selectionOptions.canSelect&&this.selectionOptions.checkboxSelection&&t("td",{class:"align-center "+(e._selected?"selected":""),onClick:t=>t.stopPropagation(),onDblClick:t=>t.stopPropagation()},t("div",null,t("modus-checkbox",{checked:e._selected,onCheckboxClick:()=>this.handleCheckboxClick(e._id)}))),null===(o=this.columns)||void 0===o?void 0:o.map((o=>{var i,l,n,r;return t("td",{class:`align-${o.align} ${o.readonly?"readonly":""} ${e._selected?"selected":""}`},"link"===(null===(i=e[o.id])||void 0===i?void 0:i._type)&&t(a,{link:e[o.id],onLinkClick:()=>this.cellLinkClick.emit(e[o.id])}),"badge"===(null===(l=e[o.id])||void 0===l?void 0:l._type)&&t(d,{badge:e[o.id]}),!(null===(n=e[o.id])||void 0===n?void 0:n._type)&&(null===(r=e[o.id])||void 0===r?void 0:r.toString()))})),!!this.rowActions.length&&t("td",{class:"align-center "+(e._selected?"selected":""),onClick:t=>t.stopPropagation(),onDblClick:t=>t.stopPropagation()},t(c,{actions:this.rowActions,animateDropdown:this.displayOptions.animateRowActionsDropdown,onRowActionClick:(t,e)=>this.rowActionClick.emit({actionId:t,rowId:e}),rowId:e._id})))}))))}static get watchers(){return{data:["dataChanged"]}}};h.style="table{border:0.0625rem var(--modus-table-border-color, #b7b9c3) solid;border-collapse:collapse;width:100%}table th{background-color:var(--modus-table-header-bg, #f1f1f6);border:0.0625rem var(--modus-table-header-border-color, #b7b9c3) solid;color:var(--modus-table-header-color, #464b52);font-size:0.875rem;font-weight:600;min-height:3rem}table th.can-sort{cursor:pointer}table th .column-header{display:flex;flex-direction:row;justify-content:center;min-height:1.25rem;padding:0 0.5rem}table th .column-header.align-left,table th .column-header.align-right{justify-content:space-between}table th .column-header.align-center{justify-content:center}table th .column-header .icon-container{align-items:center;display:flex;height:1rem;justify-content:center}table th .column-header .icon-container .sort-icon{border-radius:0.25rem;display:flex;padding:0.25rem}table th .column-header .icon-container .sort-icon:hover{background-color:var(--modus-btn-icon-only-dark-hover-bg, #e0e1e9)}table th .column-header .icon-container .sort-icon:hover svg path{fill:var(--modus-btn-icon-only-dark-hover-color, #353a40)}table th .column-header .icon-container .sort-icon:active{background-color:var(--modus-btn-icon-only-dark-active-bg, #cbcdd6)}table th .column-header .icon-container .sort-icon:active svg path{fill:var(--modus-btn-icon-only-dark-active-color, #2b2a37)}table th .column-header .icon-container .sort-icon svg path{fill:var(--modus-btn-icon-only-dark-color, #252a2e)}table tr{color:var(--modus-table-color, #464b52);font-size:0.875rem;height:3rem}table tr td{background-color:var(--modus-table-bg, #fff);border:0.0625rem var(--modus-table-border-color, #b7b9c3) solid;padding:0 0.5rem}table tr td.align-center{text-align:center}table tr td.align-center div{display:flex;height:100%;justify-content:center;width:100%}table tr td.align-left{text-align:left}table tr td.align-right{text-align:right}table tr td.readonly{background-color:var(--modus-table-readonly-bg, #e0e1e9);color:var(--modus-table-readonly-color, #464b52)}table tr td.selected{background-color:var(--modus-table-selected-bg, #dcedf9)}table tr td .cell-link{color:var(--modus-link-color, #217cbb);cursor:pointer;display:inline-block;font-weight:600}table tr td .cell-link:hover{text-decoration:underline}table tr td .cell-badge{align-items:center;display:flex;justify-content:center}table.borderless{border:none !important}table.cell-borderless th,table.cell-borderless td{border:none !important}table.row-stripe tr{border-bottom:0.0625rem var(--modus-table-border-color, #b7b9c3) solid}table.size-small th,table.size-small tr{height:2rem}modus-dropdown .row-action{border-radius:50%;cursor:pointer;padding:0.125rem;transition:background-color 0.15s ease-in-out}modus-dropdown .row-action svg{fill:var(--modus-btn-icon-only-dark-color, #252a2e)}modus-dropdown .row-action:hover{background-color:var(--modus-btn-icon-only-dark-hover-bg, #e0e1e9)}modus-dropdown .row-action:hover svg path{fill:var(--modus-btn-icon-only-dark-hover-color, #353a40)}modus-dropdown .row-action:active{background-color:var(--modus-btn-icon-only-dark-active-bg, #cbcdd6)}modus-dropdown .row-action:active svg path{fill:var(--modus-btn-icon-only-dark-active-color, #2b2a37)}modus-dropdown .list-container{position:relative;top:-6px}modus-dropdown .list-container .items-container{display:inline-block;position:sticky;width:200px}modus-dropdown .list-container .items-container .action-item{height:1.5rem;padding:0.5rem;text-align:left;user-select:none;width:200px}modus-dropdown .list-container .items-container .action-item .action-item-content{align-items:center;background-color:var(--modus-list-item-bg, #fff);border:0.0625rem solid var(--modus-list-item-border-color, #e0e1e9);color:var(--modus-list-item-color, #252a2e);display:flex;height:1.5rem;justify-content:flex-start;overflow:hidden;padding:0.5rem 1rem}modus-dropdown .list-container .items-container .action-item .action-item-content svg{margin-right:0.5rem}modus-dropdown .list-container .items-container .action-item .action-item-content svg path{fill:var(--modus-btn-icon-only-dark-color, #252a2e)}modus-dropdown .list-container .items-container .action-item .action-item-content .display-text{display:block;font-size:1rem;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;width:100%}modus-dropdown .list-container .items-container .action-item:hover .action-item-content{background-color:var(--modus-list-item-hover-bg, #e0e1e9)}";export{h as modus_data_table}